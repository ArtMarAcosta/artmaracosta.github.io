<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cat√°logo ‚Äî Mar Acosta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé®</text></svg>">
</head>

<body>

<nav class="menu">
  <button class="menu-btn">‚ò∞</button>
  <div class="menu-panel">
    <a href="index.html">Inicio</a>
    <a href="sobre-mi.html">Sobre m√≠</a>
  </div>
</nav>

<section class="catalogo-obras">

  <div class="obra-item">
    <img class="obra-click" src="images/arbol.jpg" alt="√Årbol de la vida">
    <div class="obra-info">
      <p class="obra-titulo">√ÅRBOL DE LA VIDA</p>
      <p class="obra-detalle">√ìleo sobre tela</p>
      <p class="obra-detalle">Marzo 2025 a Enero 2026</p>
      <p class="obra-detalle">40 x 50 cm</p>
    </div>
  </div>

  <div class="obra-item">
    <img class="obra-click" src="images/naturaleza-ali3n.png" alt="Naturaleza Ali3n">
    <div class="obra-info">
      <p class="obra-titulo">NATURALEZA ALI3N</p>
      <p class="obra-detalle">√ìleo sobre tela</p>
      <p class="obra-detalle">Julio 2024 a Abril 2025</p>
      <p class="obra-detalle">40 x 50 cm</p>
    </div>
  </div>

  <div class="obra-item">
    <img class="obra-click" src="images/img-3999.jpg" alt="Ternura quemada, casita arruinada">
    <div class="obra-info">
      <p class="obra-titulo">TERNURA QUEMADA, CASITA ARRUINADA</p>
      <p class="obra-detalle">√ìleo sobre tela</p>
      <p class="obra-detalle">Diciembre 2022 a Julio 2024</p>
      <p class="obra-detalle">30 x 40 cm</p>
    </div>
  </div>

  <div class="obra-item">
    <img class="obra-click" src="images/palmar2.jpg" alt="El Palmar">
    <div class="obra-info">
      <p class="obra-titulo">EL PALMAR</p>
      <p class="obra-detalle">√ìleo sobre tela</p>
      <p class="obra-detalle">Marzo 2024 a Septiembre 2024</p>
      <p class="obra-detalle">40 x 50 cm</p>
    </div>
  </div>

</section>

<hr class="separador">

<section class="serie-titulo">
  <h2>Serie 2025: una pintura por mes</h2>
</section>

<section class="serie-wrapper">
  <div class="grilla-mensual">

    <div class="mes">
      <img src="images/enero.jpg" alt="Enero 2025" data-lightbox>
      <span>Enero 2025</span>
    </div>

    <div class="mes">
      <img src="images/febrero.jpg" alt="Febrero 2025" data-lightbox>
      <span>Febrero 2025</span>
    </div>

    <div class="mes">
      <img src="images/marzo.jpg" alt="Marzo 2025" data-lightbox>
      <span>Marzo 2025</span>
    </div>

    <div class="mes">
      <img src="images/abril.jpg" alt="Abril 2025" data-lightbox>
      <span>Abril 2025</span>
    </div>

    <div class="mes">
      <img src="images/mayo.jpg" alt="Mayo 2025" data-lightbox>
      <span>Mayo 2025</span>
    </div>

    <div class="mes">
      <img src="images/julio.jpg" alt="Julio 2025" data-lightbox>
      <span>Julio 2025</span>
    </div>

    <div class="mes">
      <img src="images/agosto.jpg" alt="Agosto 2025" data-lightbox>
      <span>Agosto 2025</span>
    </div>

    <div class="mes">
      <img src="images/septiembre.jpg" alt="Septiembre 2025" data-lightbox>
      <span>Septiembre 2025</span>
    </div>

    <div class="mes">
      <img src="images/octubre.jpg" alt="Octubre 2025" data-lightbox>
      <span>Octubre 2025</span>
    </div>

    <div class="mes">
      <img src="images/noviembre.jpg" alt="Noviembre 2025" data-lightbox>
      <span>Noviembre 2025</span>
    </div>

    <div class="mes">
      <img src="images/diciembre.jpg" alt="Diciembre 2025" data-lightbox>
      <span>Diciembre 2025</span>
    </div>

  </div>
</section>

<!-- LIGHTBOX (UNICO) -->
<div id="lightbox" aria-hidden="true">
  <span class="cerrar" id="cerrar-lightbox">&times;</span>

  <span class="flecha izquierda" id="flecha-izq">&#10094;</span>

  <div class="lightbox-content" id="lightbox-content">
    <img id="lightbox-img" src="" alt="">
    <div class="lightbox-hint" id="lightbox-hint">
      Scroll para zoom ¬∑ Arrastr√° para mover ¬∑ Doble click para reset
    </div>
  </div>

  <span class="flecha derecha" id="flecha-der">&#10095;</span>
</div>

<script>
  // IM√ÅGENES DE LA SERIE (con flechas)
  const imagenesSerie = document.querySelectorAll("[data-lightbox]");

  // IM√ÅGENES GRANDES (modo museo)
  const imagenesGrandes = document.querySelectorAll(".obra-click");

  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const lightboxContent = document.getElementById("lightbox-content");

  const cerrarBtn = document.getElementById("cerrar-lightbox");
  const flechaIzq = document.getElementById("flecha-izq");
  const flechaDer = document.getElementById("flecha-der");
  const hint = document.getElementById("lightbox-hint");

  let indiceActual = 0;
  let modoSerie = true; // true = serie mensual / false = obras grandes

  // ===== ZOOM + PAN =====
  let scale = 1;
  let translateX = 0;
  let translateY = 0;

  let isDragging = false;
  let startX = 0;
  let startY = 0;

  function applyTransform() {
    lightboxImg.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
  }

  function resetZoom() {
    scale = 1;
    translateX = 0;
    translateY = 0;
    lightbox.classList.remove("zoomed");
    applyTransform();
  }

  function setZoom(newScale) {
    scale = Math.min(4, Math.max(1, newScale)); // 1x a 4x

    if (scale > 1) {
      lightbox.classList.add("zoomed");
    } else {
      lightbox.classList.remove("zoomed");
      translateX = 0;
      translateY = 0;
    }

    applyTransform();
  }

  // ===== ABRIR LIGHTBOX =====
  function abrirLightbox(src, esSerie) {
    modoSerie = esSerie;

    // modo museo para obras grandes (tapa menos)
    if (!modoSerie) {
      lightbox.classList.add("modo-museo");
    } else {
      lightbox.classList.remove("modo-museo");
    }

    // flechas solo si es serie
    flechaIzq.style.display = modoSerie ? "block" : "none";
    flechaDer.style.display = modoSerie ? "block" : "none";

    // mostrar hint un ratito
    hint.classList.add("visible");
    setTimeout(() => hint.classList.remove("visible"), 2500);

    lightboxImg.src = src;
    lightbox.classList.add("activo");
    lightbox.setAttribute("aria-hidden", "false");

    resetZoom();
  }

  function cerrarLightbox() {
    lightbox.classList.remove("activo");
    lightbox.setAttribute("aria-hidden", "true");
    resetZoom();
  }

  function mostrarImagenSerie(index) {
    if (index < 0) index = imagenesSerie.length - 1;
    if (index >= imagenesSerie.length) index = 0;
    indiceActual = index;
    lightboxImg.src = imagenesSerie[indiceActual].src;
    resetZoom();
  }

  // Click en im√°genes de la serie (con navegaci√≥n)
  imagenesSerie.forEach((img, index) => {
    img.addEventListener("click", () => {
      indiceActual = index;
      abrirLightbox(img.src, true);
    });
  });

  // Click en im√°genes grandes (modo museo)
  imagenesGrandes.forEach((img) => {
    img.addEventListener("click", () => {
      abrirLightbox(img.src, false);
    });
  });

  // Flechas SOLO si est√°s en modo serie
  flechaIzq.addEventListener("click", (e) => {
    e.stopPropagation();
    if (!modoSerie) return;
    mostrarImagenSerie(indiceActual - 1);
  });

  flechaDer.addEventListener("click", (e) => {
    e.stopPropagation();
    if (!modoSerie) return;
    mostrarImagenSerie(indiceActual + 1);
  });

  // Cerrar
  cerrarBtn.addEventListener("click", cerrarLightbox);

  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) cerrarLightbox();
  });

  // ESC para cerrar
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") cerrarLightbox();
  });

  // ===== ZOOM EVENTS =====

  // click = zoom r√°pido
  lightboxContent.addEventListener("click", (e) => {
    if (isDragging) return;

    if (scale === 1) {
      setZoom(2);
    } else {
      resetZoom();
    }
  });

  // doble click = reset
  lightboxContent.addEventListener("dblclick", (e) => {
    e.preventDefault();
    resetZoom();
  });

  // ruedita = zoom suave
  lightboxContent.addEventListener("wheel", (e) => {
    e.preventDefault();
    const zoomIntensity = 0.12;

    if (e.deltaY < 0) {
      setZoom(scale + zoomIntensity);
    } else {
      setZoom(scale - zoomIntensity);
    }
  }, { passive: false });

  // arrastrar = pan cuando hay zoom
  lightboxContent.addEventListener("mousedown", (e) => {
    if (scale === 1) return;
    isDragging = true;
    startX = e.clientX - translateX;
    startY = e.clientY - translateY;
  });

  window.addEventListener("mousemove", (e) => {
    if (!isDragging) return;
    translateX = e.clientX - startX;
    translateY = e.clientY - startY;
    applyTransform();
  });

  window.addEventListener("mouseup", () => {
    isDragging = false;
  });
</script>

<!-- SEPARADOR -->
<hr class="separador">

<footer id="contacto">
  <p>
    <a href="https://instagram.com/astro.mar_" target="_blank">
      Instagram
    </a>
  </p>
  <p>
    <a href="mailto:maracosta.artista@gmail.com">
      Mail
    </a>
  </p>
</footer>

</body>
</html>
